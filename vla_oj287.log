REFANTS: VA09, VA23, VA27. Also 7, 21, 25 respectively
Flux calib  -> FieldID:2 and Name: 0538+498
Phase calib -> FieldID:5 and Name: 1225+368
Target      -> FieldID:4 and Name: 0851+202

importvla
listobs
plotants
flagdata(vis='oj287.ms/', mode='shadow', tolerance=0.0, flagbackup=False)
flagdata(vis='oj287.ms/', mode='clip', clipzeros=True, flagbackup=False)
flagdata(vis='oj287.ms/', mode='quack', quackinterval=5.0, quackmode='beg', flagbackup=False)

plotms and flags
gencal( vis='oj287.MS',caltable='antpos_sol',caltype='antpos',infile='',endpoint='asdm',uniform=True)

2) SETJY
setjy(vis='oj287.ms/', field='0538+498', standard='Perley-Butler 2013', model='3C147_L.im', usescratch=False, scalebychan=True, spw='0,1')

3) PHASE
gaincal(vis='oj287.ms/', caltable='oj287.G0all', field='2,5', refant='7', spw='0,1', gaintype='G', calmode='p', solint='int', minsnr=5.0,)

4) GAIN
gaincal(vis='oj287.ms/',caltable='oj287.G1', 
field='0538+498',spw='0,1', 
solint='inf',refant='7', gaintype='G',calmode='ap', solnorm=False, 
gaintable=['oj287.G0all/'], 
interp=['',])  

gaincal(vis='oj287.ms/',caltable='oj287.G1', 
field='1225+368',spw='0,1', 
solint='inf',refant='7',gaintype='G',calmode='ap',solnorm=False, 
gaintable=['oj287.G0all/'], 
interp=['',], append=True) 

5) SCALING THE AMPLITUDE GAINS

myscale = fluxscale(vis='oj287.ms/', 
caltable='oj287.G1/',  
fluxtable='oj287.fluxscale1',  
reference='0538+498', 
transfer=['1225+368'], 
incremental=False) 

6) APPLYCAL

applycal(vis='oj287.ms/', 
field='0538+498', 
gaintable=['oj287.fluxscale1', 
            'oj287.G0all/'], 
gainfield=['','0538+498','',''],  
interp=['nearest',''], 
calwt=False) 


applycal(vis='oj287.ms/', 
field='1225+368', 
gaintable=['oj287.fluxscale1', 
           'oj287.G0all/'], 
gainfield=['','1225+368','',''],  
interp=['nearest',''], 
calwt=False)  


applycal(vis='oj287.ms/', 
field='0851+202', 
gaintable=['oj287.fluxscale1', 
           'oj287.G0all/'], 
gainfield=['','1225+368','',''],  
interp=['linear',''], 
calwt=False)   


7) Inspection Plots
plotms(vis='oj287.ms',field='2',correlation='RR,LL',
       antenna='',avgtime='60',xaxis='channel',yaxis='amp',
       ydatacolumn='corrected',coloraxis='corr',
       plotfile='plotms_oj287-fld2-corrected-amp.png')

plotms(vis='oj287.ms',field='2',correlation='RR,LL',
       antenna='',avgtime='60',xaxis='channel',yaxis='phase',
       ydatacolumn='corrected',coloraxis='corr',
       plotrange=[-1,-1,-180,180],
       plotfile='plotms_oj287-fld2-corrected-phase.png')

plotms(vis='oj287.ms',field='5',correlation='RR,LL',
       antenna='',avgtime='60',xaxis='channel',yaxis='amp',
       ydatacolumn='corrected',coloraxis='corr',
       plotfile='plotms_oj287-fld5-corrected-amp.png')

plotms(vis='oj287.ms',field='5',correlation='RR,LL',
       antenna='',avgtime='60',xaxis='channel',yaxis='phase',
       ydatacolumn='corrected',coloraxis='corr',
       plotrange=[-1,-1,-180,180],
       plotfile='plotms_oj287-fld5-corrected-phase.png')


8) split(vis='oj287.ms',outputvis='oj287_calibrated.ms', datacolumn='corrected',field='0851+202',correlation='RR,LL')

9) 
